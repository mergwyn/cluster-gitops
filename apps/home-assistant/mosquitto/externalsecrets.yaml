---
rawResources:
  externalsecret:
    apiVersion: external-secrets.io/v1
    kind: ExternalSecret
    spec:
      spec:
        secretStoreRef:
          kind: ClusterSecretStore
          name: bitwarden
        target:
          name: "{{.Release.Name}}-secret"
          creationPolicy: Owner
          template:
            data:
              # This gets hashed in an initContainer
              passwords: |
                {{`{{ .MQTT_USER }}`}}:{{`{{ .MQTT_PASSWORD }}`}}

        dataFrom:
          - extract:
              key: mqtt_credentials
