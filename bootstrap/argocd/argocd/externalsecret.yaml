---
resources:
  - apiVersion: external-secrets.io/v1
    kind: ExternalSecret
    metadata:
      name: &admin argocd-initial-admin-secret
      namespace: argocd
      labels:
        app.kubernetes.io/name: argocd
    spec:
      refreshInterval: 5m
      secretStoreRef:
        kind: ClusterSecretStore
        name: bitwarden
      target:
        name: *admin
        creationPolicy: Owner
      dataFrom:
        - extract:
            key: argocd_admin_password

  - apiVersion: external-secrets.io/v1
    kind: ExternalSecret
    metadata:
      name: &secret argocd-secret
      namespace: argocd
      labels:
        app.kubernetes.io/name: argocd
    spec:
      refreshInterval: 5m
      secretStoreRef:
        kind: ClusterSecretStore
        name: bitwarden
      target:
        name: *secret
        creationPolicy: Owner
      dataFrom:
        - extract:
            key: argocd_secret

